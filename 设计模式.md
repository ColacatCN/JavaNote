# 设计模式

## 简单工厂模式

**简单工厂模式有唯一的工厂类，工厂类的创建方法根据传入的参数做 if-else 条件判断，决定最终创建什么样的产品对象。**

```java
public interface IMask {
    void show();
}

public class HighEndMask implements IMask {
    @Override
    public void show() {
        System.out.println("我是高端口罩");
    }
}

public class LowEndMask implements IMask {
    @Override
    public void show(){
        System.out.println("我的低端口罩");
    }
}

public class MaskFactory{

    public IMask createMask(String type) {
        IMask mask = null;
        if ("高端口罩".equals(type)){
            mask = new HighEndMask();
            // .....
            // HighEndMask的100行初始化代码
        } else if ("低端口罩".equals(type)) {
            mask =  new LowEndMask();
            // .....
            // LowEndMask的100行初始化代码
        }
        return mask;
    }
}

public class Test {

    public static void main(String[] args) {
        MaskFactory factory = new MaskFactory();
        IMask maskA = factory.createMask("高端口罩");
        IMask maskB = factory.createMask("低端口罩");
        maskA.show();
        maskB.show();
    }
}
```

## 工厂模式

工厂类变成了抽象的接口，高端口罩工厂和低端口罩工厂这两个子类分别实现了该接口。想要创建什么样的口罩对象，只需实例化不同的工厂子类，调用相同的创建方法，无需再传入参数。

**工厂模式由多个工厂类实现工厂接口，利用多态来创建不同的产品对象，从而避免了冗长的 if-else 条件判断。**

```java
public interface IMaskFactory {
    IMask createMask();
}

public class HighEndFactory implements IMaskFactory{

    @Override
    public IMask createMask() {
        IMask mask =  new HighEndMask();
        // .....
        // HighEndMask的100行初始化代码
        return mask;
    }
}

public class LowEndFactory implements IMaskFactory{

    @Override
    public IMask createMask() {
        IMask mask =  new LowEndMask();
        // .....
        //  LowEndMask的100行初始化代码
        return mask;
    }
}

public class Test {

    public static void main(String[] args) {
        IMaskFactory factoryA = new LowEndFactory();
        IMaskFactory factoryB = new HighEndFactory();
        IMask maskA = factoryA.createMask();
        IMask maskB = factoryB.createMask();
        maskA.show();
        maskB.show();
    }
}
```

## 抽象工厂模式

**抽象工厂模式把产品子类进行分组，同组中的不同产品由同一个工厂实现类的不同方法负责创建，从而减少了工厂实现类的数量。**

```java
public interface IMask {
    void showMask();
}
 
public class LowEndMask implements IMask {
    @Override
    public void showMask(){
        System.out.println("我是低端口罩");
    }
}
 
public class HighEndMask implements IMask {
    @Override
    public void showMask() {
        System.out.println("我是高端口罩");
    }
}
 
public interface IProtectiveSuit {
    void showSuit();
}
 
public class LowEndProtectiveSuit implements IProtectiveSuit {
    @Override
    public void showSuit() {
        System.out.println("我是低端防护服");
    }
}
 
public class HighEndProtectiveSuit implements IProtectiveSuit {
    @Override
    public void showSuit() {
        System.out.println("我是高端防护服");
    }
}


public interface IFactory {
    //创建口罩
    IMask createMask();
    //创建防护服
    IProtectiveSuit createSuit();
}
 
public class LowEndFactory implements IFactory {
    @Override
    public IMask createMask() {
        IMask mask =  new LowEndMask();
        // .....
        //  LowEndMask的100行初始化代码
        return mask;
    }
 
    @Override
    public IProtectiveSuit createSuit() {
        IProtectiveSuit suit =  new LowEndProtectiveSuit();
        // .....
        //  LowEndProtectiveSuit的100行初始化代码
        return suit;
    }
}
 
public class HighEndFactory implements IFactory {
    @Override
    public IMask createMask() {
        IMask mask =  new HighEndMask();
        // .....
        // HighEndMask的100行初始化代码
        return mask;
    }
 
    @Override
    public IProtectiveSuit createSuit() {
        IProtectiveSuit suit =  new HighEndProtectiveSuit();
        // .....
        //  HighEndProtectiveSuit的100行初始化代码
        return suit;
    }
}


public class Test {
 
    public static void main(String[] args) {
        IFactory factoryA = new LowEndFactory();
        IFactory factoryB = new HighEndFactory();
        //创建低端口罩
        IMask maskA = factoryA.createMask();
        //创建高端口罩
        IMask maskB = factoryB.createMask();
        //创建低端防护服
        IProtectiveSuit suitA = factoryA.createSuit();
        //创建高端防护服
        IProtectiveSuit suitB = factoryB.createSuit();
 
        maskA.showMask();
        maskB.showMask();
        suitA.showSuit();
        suitB.showSuit();
    }
}
```

## 适配器模式

**适配器模式的主要作用是将一个类的接口转换成客户希望的另外一个接口。**

在 Retrofit 中 CallAdapter 接口就是用来适配 OkHttpCall 对象的，在调用 CallAdapter.adapt() 方法时 OkHttpCall 对象会以方法参数的形式被传入 adapt() 方法中，然后将其封装进其他接口中再使用。

```java
public interface LightningInterface {
    public void chargeWithLightning();
}

public interface TypeCInterface {
    public void chargeWithTypeC();
}

public class IphoneX { 
    
    private LightningInterface lightningInterface;

    public IphoneX() {
    }

    public IphoneX(LightningInterface lightningInterface) {
        this.lightningInterface = lightningInterface;
    }

    public void charge() {
        System.out.println("开始给我的IphoneX手机充电...");
        lightningInterface.chargeWithLightning();
        System.out.println("结束给我的IphoneX手机充电...");
    }
    
    // getter 和 setter
}

public class AndroidCharger implements TypeCInterface {
    
    @Override
    public void chargeWithTypeC() {
        System.out.println("使用Type-C型号的充电器充电...");
    }
}

public class Adapter implements LightningInterface {
    
    private TypeCInterface typeCInterface;
    
    public Adapter() {
    }

    public Adapter(TypeCInterface typeCInterface) {
        typeCInterface = typeCInterface;
    }

    @Override
    public void chargeWithLightning() {
        typeCInterface.chargeWithTypeC();
    }
    
    // getter 和 setter
}

public class Test{

    public static void main(String[] args) {
        Adapter adapter  = new Adapter(new AndroidCharger());
        IphoneX iphoneX = new IphoneX();
        iphoneX.setLightningInterface(adapter);
        iphoneX.charge();
    }
}
```

