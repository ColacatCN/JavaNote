# 工作项目成果梳理

当用户需要通过业务接口的某个方法访问服务端上的资源时，只需要在成员变量上标注 @REST 注解就能为其注入一个 Retrofit 客户端。不同于 Retrofit 客户端的常规使用方式，用户无须考虑是使用同步还是异步的方式发起请求，以及使用哪种工具去反序列化服务端返回的结果，可以像访问本地服务一样去访问远程。具体实现方式是通过动态代理为业务接口生成对应的代理类，当用户调用业务接口的某个方法时，就会触发 InvocationHandler 的 invoke() 方法创建一个 Retrofit 客户端，然后再通过反射机制调用 Retrofit 生成的代理类中的方法。在本模块设计之初就希望摒弃常规的使用方式，尽可能屏蔽客户端的底层实现，方便业务开发人员。因此通过梳理 Retrofit 的源码，最终选择继承 CallAdapter.Factory 抽象类实现自定义的 CallAdapterFactory。不仅覆写了它的 get() 方法，旨在根据方法的返回值类型和注解筛选出目标 CallAdapter，而且还覆写了其内部 adapt() 方法的执行逻辑，目的是不再直接将 Call 对象返回给业务层，而是调用其 execute() 方法向服务端发起请求，并将经过反序列化后的结果返回给业务层。
